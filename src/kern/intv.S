
; generated by intr.S.rb
; do not edit

[section .text]
[global _int_restore_regs]
[extern  int_common_handler]

;; 
;; this routine is called on each isr & irq is raised. store the current cpu state on the kernel stack.
;; kernel stack is pointed by the esp0 field inside tss.
;; 
;; the routine _int_restore_regs is just called from *swtch*. 
_int_common_stub:
    pusha
    push dword ds
    push dword es
    push dword fs
    push dword gs
    mov ax, 0x10
    mov ds, ax
    mov es, ax
    mov fs, ax
    mov gs, ax
    mov eax, esp
    push eax                        ; esp is just the pointer to struct regs *.
    mov eax, int_common_handler
    call eax
    pop eax                         ; esp ignored
_int_restore_regs:
    pop dword gs
    pop dword fs
    pop dword es
    pop dword ds
    popa
    add esp, 8
    sti
    iret


    _int0:
      cli
      push  dword 0
      push  dword 0
      jmp   _int_common_stub
  

    _int1:
      cli
      push  dword 0
      push  dword 1
      jmp   _int_common_stub
  

    _int2:
      cli
      push  dword 0
      push  dword 2
      jmp   _int_common_stub
  

    _int3:
      cli
      push  dword 0
      push  dword 3
      jmp   _int_common_stub
  

    _int4:
      cli
      push  dword 0
      push  dword 4
      jmp   _int_common_stub
  

    _int5:
      cli
      push  dword 0
      push  dword 5
      jmp   _int_common_stub
  

    _int6:
      cli
      push  dword 0
      push  dword 6
      jmp   _int_common_stub
  

    _int7:
      cli
      push  dword 0
      push  dword 7
      jmp   _int_common_stub
  

    _int8:
      cli
      
      push  dword 8
      jmp   _int_common_stub
  

    _int9:
      cli
      
      push  dword 9
      jmp   _int_common_stub
  

    _int10:
      cli
      
      push  dword 10
      jmp   _int_common_stub
  

    _int11:
      cli
      
      push  dword 11
      jmp   _int_common_stub
  

    _int12:
      cli
      
      push  dword 12
      jmp   _int_common_stub
  

    _int13:
      cli
      
      push  dword 13
      jmp   _int_common_stub
  

    _int14:
      cli
      
      push  dword 14
      jmp   _int_common_stub
  

    _int15:
      cli
      push  dword 0
      push  dword 15
      jmp   _int_common_stub
  

    _int16:
      cli
      push  dword 0
      push  dword 16
      jmp   _int_common_stub
  

    _int17:
      cli
      
      push  dword 17
      jmp   _int_common_stub
  

    _int18:
      cli
      push  dword 0
      push  dword 18
      jmp   _int_common_stub
  

    _int19:
      cli
      push  dword 0
      push  dword 19
      jmp   _int_common_stub
  

    _int20:
      cli
      push  dword 0
      push  dword 20
      jmp   _int_common_stub
  

    _int21:
      cli
      push  dword 0
      push  dword 21
      jmp   _int_common_stub
  

    _int22:
      cli
      push  dword 0
      push  dword 22
      jmp   _int_common_stub
  

    _int23:
      cli
      push  dword 0
      push  dword 23
      jmp   _int_common_stub
  

    _int24:
      cli
      push  dword 0
      push  dword 24
      jmp   _int_common_stub
  

    _int25:
      cli
      push  dword 0
      push  dword 25
      jmp   _int_common_stub
  

    _int26:
      cli
      push  dword 0
      push  dword 26
      jmp   _int_common_stub
  

    _int27:
      cli
      push  dword 0
      push  dword 27
      jmp   _int_common_stub
  

    _int28:
      cli
      push  dword 0
      push  dword 28
      jmp   _int_common_stub
  

    _int29:
      cli
      push  dword 0
      push  dword 29
      jmp   _int_common_stub
  

    _int30:
      cli
      push  dword 0
      push  dword 30
      jmp   _int_common_stub
  

    _int31:
      cli
      push  dword 0
      push  dword 31
      jmp   _int_common_stub
  

    _int32:
      cli
      push  dword 0
      push  dword 32
      jmp   _int_common_stub
  

    _int33:
      cli
      push  dword 0
      push  dword 33
      jmp   _int_common_stub
  

    _int34:
      cli
      push  dword 0
      push  dword 34
      jmp   _int_common_stub
  

    _int35:
      cli
      push  dword 0
      push  dword 35
      jmp   _int_common_stub
  

    _int36:
      cli
      push  dword 0
      push  dword 36
      jmp   _int_common_stub
  

    _int37:
      cli
      push  dword 0
      push  dword 37
      jmp   _int_common_stub
  

    _int38:
      cli
      push  dword 0
      push  dword 38
      jmp   _int_common_stub
  

    _int39:
      cli
      push  dword 0
      push  dword 39
      jmp   _int_common_stub
  

    _int40:
      cli
      push  dword 0
      push  dword 40
      jmp   _int_common_stub
  

    _int41:
      cli
      push  dword 0
      push  dword 41
      jmp   _int_common_stub
  

    _int42:
      cli
      push  dword 0
      push  dword 42
      jmp   _int_common_stub
  

    _int43:
      cli
      push  dword 0
      push  dword 43
      jmp   _int_common_stub
  

    _int44:
      cli
      push  dword 0
      push  dword 44
      jmp   _int_common_stub
  

    _int45:
      cli
      push  dword 0
      push  dword 45
      jmp   _int_common_stub
  

    _int46:
      cli
      push  dword 0
      push  dword 46
      jmp   _int_common_stub
  

    _int47:
      cli
      push  dword 0
      push  dword 47
      jmp   _int_common_stub
  

    _int48:
      cli
      push  dword 0
      push  dword 48
      jmp   _int_common_stub
  

    _int49:
      cli
      push  dword 0
      push  dword 49
      jmp   _int_common_stub
  

    _int50:
      cli
      push  dword 0
      push  dword 50
      jmp   _int_common_stub
  

    _int51:
      cli
      push  dword 0
      push  dword 51
      jmp   _int_common_stub
  

    _int52:
      cli
      push  dword 0
      push  dword 52
      jmp   _int_common_stub
  

    _int53:
      cli
      push  dword 0
      push  dword 53
      jmp   _int_common_stub
  

    _int54:
      cli
      push  dword 0
      push  dword 54
      jmp   _int_common_stub
  

    _int55:
      cli
      push  dword 0
      push  dword 55
      jmp   _int_common_stub
  

    _int56:
      cli
      push  dword 0
      push  dword 56
      jmp   _int_common_stub
  

    _int57:
      cli
      push  dword 0
      push  dword 57
      jmp   _int_common_stub
  

    _int58:
      cli
      push  dword 0
      push  dword 58
      jmp   _int_common_stub
  

    _int59:
      cli
      push  dword 0
      push  dword 59
      jmp   _int_common_stub
  

    _int60:
      cli
      push  dword 0
      push  dword 60
      jmp   _int_common_stub
  

    _int61:
      cli
      push  dword 0
      push  dword 61
      jmp   _int_common_stub
  

    _int62:
      cli
      push  dword 0
      push  dword 62
      jmp   _int_common_stub
  

    _int63:
      cli
      push  dword 0
      push  dword 63
      jmp   _int_common_stub
  

    _int64:
      cli
      push  dword 0
      push  dword 64
      jmp   _int_common_stub
  

    _int65:
      cli
      push  dword 0
      push  dword 65
      jmp   _int_common_stub
  

    _int66:
      cli
      push  dword 0
      push  dword 66
      jmp   _int_common_stub
  

    _int67:
      cli
      push  dword 0
      push  dword 67
      jmp   _int_common_stub
  

    _int68:
      cli
      push  dword 0
      push  dword 68
      jmp   _int_common_stub
  

    _int69:
      cli
      push  dword 0
      push  dword 69
      jmp   _int_common_stub
  

    _int70:
      cli
      push  dword 0
      push  dword 70
      jmp   _int_common_stub
  

    _int71:
      cli
      push  dword 0
      push  dword 71
      jmp   _int_common_stub
  

    _int72:
      cli
      push  dword 0
      push  dword 72
      jmp   _int_common_stub
  

    _int73:
      cli
      push  dword 0
      push  dword 73
      jmp   _int_common_stub
  

    _int74:
      cli
      push  dword 0
      push  dword 74
      jmp   _int_common_stub
  

    _int75:
      cli
      push  dword 0
      push  dword 75
      jmp   _int_common_stub
  

    _int76:
      cli
      push  dword 0
      push  dword 76
      jmp   _int_common_stub
  

    _int77:
      cli
      push  dword 0
      push  dword 77
      jmp   _int_common_stub
  

    _int78:
      cli
      push  dword 0
      push  dword 78
      jmp   _int_common_stub
  

    _int79:
      cli
      push  dword 0
      push  dword 79
      jmp   _int_common_stub
  

    _int80:
      cli
      push  dword 0
      push  dword 80
      jmp   _int_common_stub
  

    _int81:
      cli
      push  dword 0
      push  dword 81
      jmp   _int_common_stub
  

    _int82:
      cli
      push  dword 0
      push  dword 82
      jmp   _int_common_stub
  

    _int83:
      cli
      push  dword 0
      push  dword 83
      jmp   _int_common_stub
  

    _int84:
      cli
      push  dword 0
      push  dword 84
      jmp   _int_common_stub
  

    _int85:
      cli
      push  dword 0
      push  dword 85
      jmp   _int_common_stub
  

    _int86:
      cli
      push  dword 0
      push  dword 86
      jmp   _int_common_stub
  

    _int87:
      cli
      push  dword 0
      push  dword 87
      jmp   _int_common_stub
  

    _int88:
      cli
      push  dword 0
      push  dword 88
      jmp   _int_common_stub
  

    _int89:
      cli
      push  dword 0
      push  dword 89
      jmp   _int_common_stub
  

    _int90:
      cli
      push  dword 0
      push  dword 90
      jmp   _int_common_stub
  

    _int91:
      cli
      push  dword 0
      push  dword 91
      jmp   _int_common_stub
  

    _int92:
      cli
      push  dword 0
      push  dword 92
      jmp   _int_common_stub
  

    _int93:
      cli
      push  dword 0
      push  dword 93
      jmp   _int_common_stub
  

    _int94:
      cli
      push  dword 0
      push  dword 94
      jmp   _int_common_stub
  

    _int95:
      cli
      push  dword 0
      push  dword 95
      jmp   _int_common_stub
  

    _int96:
      cli
      push  dword 0
      push  dword 96
      jmp   _int_common_stub
  

    _int97:
      cli
      push  dword 0
      push  dword 97
      jmp   _int_common_stub
  

    _int98:
      cli
      push  dword 0
      push  dword 98
      jmp   _int_common_stub
  

    _int99:
      cli
      push  dword 0
      push  dword 99
      jmp   _int_common_stub
  

    _int100:
      cli
      push  dword 0
      push  dword 100
      jmp   _int_common_stub
  

    _int101:
      cli
      push  dword 0
      push  dword 101
      jmp   _int_common_stub
  

    _int102:
      cli
      push  dword 0
      push  dword 102
      jmp   _int_common_stub
  

    _int103:
      cli
      push  dword 0
      push  dword 103
      jmp   _int_common_stub
  

    _int104:
      cli
      push  dword 0
      push  dword 104
      jmp   _int_common_stub
  

    _int105:
      cli
      push  dword 0
      push  dword 105
      jmp   _int_common_stub
  

    _int106:
      cli
      push  dword 0
      push  dword 106
      jmp   _int_common_stub
  

    _int107:
      cli
      push  dword 0
      push  dword 107
      jmp   _int_common_stub
  

    _int108:
      cli
      push  dword 0
      push  dword 108
      jmp   _int_common_stub
  

    _int109:
      cli
      push  dword 0
      push  dword 109
      jmp   _int_common_stub
  

    _int110:
      cli
      push  dword 0
      push  dword 110
      jmp   _int_common_stub
  

    _int111:
      cli
      push  dword 0
      push  dword 111
      jmp   _int_common_stub
  

    _int112:
      cli
      push  dword 0
      push  dword 112
      jmp   _int_common_stub
  

    _int113:
      cli
      push  dword 0
      push  dword 113
      jmp   _int_common_stub
  

    _int114:
      cli
      push  dword 0
      push  dword 114
      jmp   _int_common_stub
  

    _int115:
      cli
      push  dword 0
      push  dword 115
      jmp   _int_common_stub
  

    _int116:
      cli
      push  dword 0
      push  dword 116
      jmp   _int_common_stub
  

    _int117:
      cli
      push  dword 0
      push  dword 117
      jmp   _int_common_stub
  

    _int118:
      cli
      push  dword 0
      push  dword 118
      jmp   _int_common_stub
  

    _int119:
      cli
      push  dword 0
      push  dword 119
      jmp   _int_common_stub
  

    _int120:
      cli
      push  dword 0
      push  dword 120
      jmp   _int_common_stub
  

    _int121:
      cli
      push  dword 0
      push  dword 121
      jmp   _int_common_stub
  

    _int122:
      cli
      push  dword 0
      push  dword 122
      jmp   _int_common_stub
  

    _int123:
      cli
      push  dword 0
      push  dword 123
      jmp   _int_common_stub
  

    _int124:
      cli
      push  dword 0
      push  dword 124
      jmp   _int_common_stub
  

    _int125:
      cli
      push  dword 0
      push  dword 125
      jmp   _int_common_stub
  

    _int126:
      cli
      push  dword 0
      push  dword 126
      jmp   _int_common_stub
  

    _int127:
      cli
      push  dword 0
      push  dword 127
      jmp   _int_common_stub
  

    _int128:
      cli
      push  dword 0
      push  dword 128
      jmp   _int_common_stub
  

; vector table
[section .data]
[global  _intv]

_intv:
  dd _int0
  dd _int1
  dd _int2
  dd _int3
  dd _int4
  dd _int5
  dd _int6
  dd _int7
  dd _int8
  dd _int9
  dd _int10
  dd _int11
  dd _int12
  dd _int13
  dd _int14
  dd _int15
  dd _int16
  dd _int17
  dd _int18
  dd _int19
  dd _int20
  dd _int21
  dd _int22
  dd _int23
  dd _int24
  dd _int25
  dd _int26
  dd _int27
  dd _int28
  dd _int29
  dd _int30
  dd _int31
  dd _int32
  dd _int33
  dd _int34
  dd _int35
  dd _int36
  dd _int37
  dd _int38
  dd _int39
  dd _int40
  dd _int41
  dd _int42
  dd _int43
  dd _int44
  dd _int45
  dd _int46
  dd _int47
  dd _int48
  dd _int49
  dd _int50
  dd _int51
  dd _int52
  dd _int53
  dd _int54
  dd _int55
  dd _int56
  dd _int57
  dd _int58
  dd _int59
  dd _int60
  dd _int61
  dd _int62
  dd _int63
  dd _int64
  dd _int65
  dd _int66
  dd _int67
  dd _int68
  dd _int69
  dd _int70
  dd _int71
  dd _int72
  dd _int73
  dd _int74
  dd _int75
  dd _int76
  dd _int77
  dd _int78
  dd _int79
  dd _int80
  dd _int81
  dd _int82
  dd _int83
  dd _int84
  dd _int85
  dd _int86
  dd _int87
  dd _int88
  dd _int89
  dd _int90
  dd _int91
  dd _int92
  dd _int93
  dd _int94
  dd _int95
  dd _int96
  dd _int97
  dd _int98
  dd _int99
  dd _int100
  dd _int101
  dd _int102
  dd _int103
  dd _int104
  dd _int105
  dd _int106
  dd _int107
  dd _int108
  dd _int109
  dd _int110
  dd _int111
  dd _int112
  dd _int113
  dd _int114
  dd _int115
  dd _int116
  dd _int117
  dd _int118
  dd _int119
  dd _int120
  dd _int121
  dd _int122
  dd _int123
  dd _int124
  dd _int125
  dd _int126
  dd _int127
  dd _int128
